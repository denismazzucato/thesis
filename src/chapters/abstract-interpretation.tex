
\chapter{Abstract Interpretation}
\labch{abstract-interpretation}


\begin{definition}[Validation]
  \labdef{validation}
  \begin{align}
    \labeq{validation}
    \defprogram \satisfies \defproperty \iff \collectingsemantics \subseteq \defproperty
  \end{align}
\end{definition}

\begin{definition}[Collecting Semantics]
  \labdef{collecting-semantics}
  \begin{align}
    \labeq{collecting-semantics}
    \collectingsemanticsnoparam \defeq \{ \dependencysemanticsnoparam \}
  \end{align}
\end{definition}

\begin{definition}[Dependency Semantics]
  \labdef{dependency-semantics}
  \begin{align*}
    \dependencysemanticsnoparam \DefeQ \setdef{\inputoutputtuple{\defseq}}{\defseq\in\tracesemanticsnoparam}
  \end{align*}
\end{definition}


\section{Order Theory}
\labsec{order-theory}

\subsection{Sets}
\labsec{sets}

\subsection{Relations}
\labsec{relations}

\subsection{Ordered Sets}
\labsec{ordered-sets}

\subsection{Lattices}
\labsec{lattices}

\begin{definition}[Upper Closure Operator]\labdef{upper-closure-operator}
  An \emph{upper closure operator} on a poset $\defposet$ is an operator $\rho\in\defposet\to\defposet$ which is monotone, idempotent, and extensive ($\foralldef{\defposetelem \in \defposet}{\defposetelem \le P \rho(\defposetelem)}$).
\end{definition}

\subsection{Functions}
\labsec{functions}

\subsection{Fixpoints}
\labsec{fixpoints}

\section{Notations of Abstract Interpretation}
\labsec{notations-of-abstract-interpretation}

\subsection{Transition System}
\labsec{transition-system}

\begin{definition}[State]\labdef{state}
  \begin{align*}
    \state \IN \variables \to \values
  \end{align*}
\end{definition}

\subsection{Maximal Trace Semantics}
\labsec{maximal-trace-semantics}

\begin{definition}[Maximal Trace Semantics]\labdef{maximal-trace-semantics}
  \begin{align*}
    \tracesemanticsnoparam &\DefeQ \lfp \tracetransformer \\
    \tracetransformer(\defsetoftraces) &\DefeQ \finalstates \setjoin (\mergesequences{\transitionrelation}{\defsetoftraces})
  \end{align*}
\end{definition}

\subsection{Collecting Semantics}
\labsec{collecting-semantics}

\begin{definition}[Collecting Semantics]\labdef{collecting-semantics}
  \begin{align*}
    \collectingsemanticsnoparam &\DefeQ \{\spacearound{\tracesemanticsnoparam}\}
  \end{align*}

\end{definition}

\subsection{Verification Framework}
\labsec{verification-framework}

\begin{definition}[Validation]\labdef{validation}
  \begin{align*}
    \defprogram \satisfies \defproperty \IfF \collectingsemantics \subseteq \defproperty
  \end{align*}
\end{definition}

\subsection{Fixpoint Induction}
\labsec{fixpoint-induction}

\subsection{Hierarchy of Semantics}
\labsec{hierarchy-of-semantics}

\subsection{Galois Connection}
\labsec{galois-connection}

\subsection{Reachable State Semantics}
\labsec{reachable-state-semantics}

\subsection{Fixpoint Transfer}
\labsec{fixpoint-transfer}

\subsection{Fixpoint Approximation}
\labsec{fixpoint-approximation}

\subsection{Widening}
\labsec{widening}

\subsection{Narrowing}
\labsec{narrowing}


\section{A Small Imperative Language}
\labsec{a-small-imperative-language}

\subsection{Syntax}
\labsec{syntax}

\subsection{Maximal Trace Semantics}
\labsec{maximal-trace-semantics}

\subsection{Numerical Abstract Domain}
\labsec{numerical-abstract-domain}

\subsubsection*{Sign}

\subsubsection*{Boxes}

\subsubsection*{Conjunctions of Linear Constraints}

\subsection{Reduced Product}
\labsec{reduced-product}

\subsection{Forward Reachability State Semantics}
\labsec{forward-reachability-state-semantics}

\subsection{Backward Reachability State Semantics}
\labsec{backward-reachability-state-semantics}

\begin{definition}[Backward Semantics]\labdef{backward-semantics}
\begin{align*}
&\backwardsemanticsnoparam \semanticsof{\skipstmt}\defabstractvalue \DefeQ
\defabstractvalue
\\
&\backwardsemanticsnoparam \semanticsof{\assignstmt}\defabstractvalue \DefeQ
\abstractdomainsubstitute{\defvariable}{\defaexp}\defabstractvalue
\\
&\backwardsemanticsnoparam \semanticsof{\assertstmt}\defabstractvalue \DefeQ
\abstractdomainfilter\semanticsof{\defbexp}\defabstractvalue
\\
&\backwardsemanticsnoparam \semanticsof{\ifstmt[\defstmt][\defstmt']}\defabstractvalue \DefeQ
\\
&\quad \abstractdomainfilter\semanticsof{\defbexp}(\backwardsemanticsnoparam \semanticsof{\defstmt}\defabstractvalue) \spacearound{\abstractdomainjoin} \abstractdomainfilter\semanticsof{\neg\defbexp}(\backwardsemanticsnoparam \semanticsof{\defstmt'}\defabstractvalue)
\\
&\backwardsemanticsnoparam \semanticsof{\whilestmt}\defabstractvalue \DefeQ \lim_n \abstractdomainfixpoint_n \\
&\quad \abstractdomainfixpoint_0 \DefeQ \defabstractvalue \\
&\quad \abstractdomainfixpoint_{n+1} \DefeQ \abstractdomainfixpoint_n \spacearound{\abstractdomainwidening} \abstractdomainfixpoint(\abstractdomainfixpoint_n) \\
&\quad \abstractdomainfixpoint(\defotherabstractvalue) \DefeQ \abstractdomainfilter\semanticsof{\neg\defbexp}\defabstractvalue \spacearound{\abstractdomainjoin} \abstractdomainfilter\semanticsof{\defbexp}(\backwardsemanticsnoparam \semanticsof{\defstmt}\defotherabstractvalue)
\\
&\backwardsemanticsnoparam \semanticsof{\compstmt[\defstmt][\defstmt']}\defabstractvalue \DefeQ
\backwardsemanticsnoparam \semanticsof{\defstmt}( \backwardsemanticsnoparam \semanticsof{\defstmt'}\defabstractvalue)
\end{align*}
\end{definition}

\begin{marginlisting}
  \caption{Landing alarm system}
  \labprog{landing-alarm-system}
  \vspace{\lineheight}
\begin{lstlisting}[
  language=customPython]
landing_coeff =
  abs(angle) + speed
if landing_coeff < 2:
  risk = 0
else if landing_coeff > 5:
  risk = 3
else:
  risk =
    floor(landing_coeff) - 2
  \end{lstlisting}
\end{marginlisting}
